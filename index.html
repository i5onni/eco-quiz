<!DOCTYPE html>
<html lang="ko">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>ğŸŒ ìƒíƒœÂ·í™˜ê²½ í€´ì¦ˆê²Œì„</title>
<style>
  body {
    margin: 0; font-family: 'Pretendard', sans-serif;
    color: #fff; text-align: center; overflow: hidden;
    transition: background 1s ease;
  }
  h1 { margin-top: 20px; }
  #quiz-container {
    display: flex; flex-direction: column;
    justify-content: center; align-items: center;
    height: 100vh; padding: 20px;
  }
  .question { font-size: 1.6em; margin-bottom: 25px; }
  .options button {
    display: block; margin: 8px auto; padding: 12px 25px;
    background: rgba(255,255,255,0.15);
    color: #fff; border: 2px solid rgba(255,255,255,0.5);
    border-radius: 10px; font-size: 1em; cursor: pointer;
    transition: all 0.3s ease;
  }
  .options button:hover { background: rgba(255,255,255,0.4); }
  #progress { width: 80%; height: 15px; background: rgba(255,255,255,0.2);
              border-radius: 8px; margin: 15px auto; overflow: hidden; }
  #progress-bar { height: 100%; width: 0%; background: #00e6b8; transition: width 0.5s; }
  #timer { font-size: 1.2em; margin: 10px; }
  #hint, #next { margin: 10px; padding: 10px 18px; border: none;
                 background: rgba(255,255,255,0.3); border-radius: 8px;
                 color: #fff; cursor: pointer; }
  #result { font-size: 1.5em; }
  #explanation { font-size: 1em; margin-top: 10px; opacity: 0.9; }
  #highscore { font-size: 1em; margin-top: 8px; opacity: 0.8; }
  canvas { position: fixed; top:0; left:0; width:100%; height:100%; z-index:-1; }
</style>
</head>
<body>
<canvas id="bgCanvas"></canvas>
<div id="quiz-container">
  <h1>ğŸŒ³ ìƒíƒœÂ·í™˜ê²½ í€´ì¦ˆ</h1>
  <div id="timer"></div>
  <div id="progress"><div id="progress-bar"></div></div>
  <div class="question" id="question"></div>
  <div class="options" id="options"></div>
  <button id="hint">íŒíŠ¸ë³´ê¸°</button>
  <button id="next" style="display:none;">ë‹¤ìŒë¬¸ì œ</button>
  <div id="result"></div>
  <div id="explanation"></div>
  <div id="highscore"></div>
</div>

<script>
const quizData = [
  { q: "ì§€êµ¬ ì˜¨ë‚œí™”ì˜ ì£¼ìš” ì›ì¸ìœ¼ë¡œ ì˜³ì€ ê²ƒì€?", a: ["ì‚°ì†Œ ì¦ê°€", "ì´ì‚°í™”íƒ„ì†Œ ì¦ê°€", "ì§ˆì†Œ ê°ì†Œ", "í™©ì‚° ì¦ê°€"], c: 1, h: "ì˜¨ì‹¤íš¨ê³¼ë¥¼ ìœ ë°œí•˜ëŠ” ê¸°ì²´", e:"ì´ì‚°í™”íƒ„ì†Œê°€ ì¦ê°€í•˜ë©´ ì˜¨ì‹¤íš¨ê³¼ë¡œ ì¸í•´ ì§€êµ¬ ì˜¨ë„ê°€ ìƒìŠ¹í•©ë‹ˆë‹¤." },
  { q: "í”Œë¼ìŠ¤í‹± ì“°ë ˆê¸°ê°€ ê°€ì¥ ë§ì´ ì¶•ì ë˜ëŠ” ê³³ì€?", a: ["ì‚¬ë§‰", "ì‚°", "í•´ì–‘", "ê·¹ì§€ë°©"], c: 2, h: "ë¬¼ê³ ê¸°ë“¤ë„ ë¨¹ëŠ” ê³³", e:"í”Œë¼ìŠ¤í‹±ì˜ ëŒ€ë¶€ë¶„ì€ í•´ì–‘ìœ¼ë¡œ í˜ëŸ¬ ë“¤ì–´ê°€ ë°”ë‹¤ ìƒíƒœê³„ë¥¼ í•´ì¹©ë‹ˆë‹¤." },
  { q: "ë‹¤ìŒ ì¤‘ ì¬ìƒ ë¶ˆê°€ëŠ¥í•œ ì—ë„ˆì§€ëŠ”?", a: ["íƒœì–‘ì—´", "í’ë ¥", "ì„íƒ„", "ìˆ˜ë ¥"], c: 2, h: "í™”ì„ì—ì„œ ë‚˜ì˜¤ëŠ” ì—ë„ˆì§€", e:"ì„íƒ„ì€ í•œ ë²ˆ ì‚¬ìš©í•˜ë©´ ë‹¤ì‹œ ë§Œë“¤ ìˆ˜ ì—†ëŠ” ì¬ìƒ ë¶ˆê°€ëŠ¥ ìì›ì…ë‹ˆë‹¤." },
  { q: "íƒ„ì†Œì¤‘ë¦½ì´ë€?", a: ["íƒ„ì†Œ ë°°ì¶œì„ ì™„ì „íˆ ì—†ì• ëŠ” ê²ƒ", "ë°°ì¶œí•œ íƒ„ì†Œë¥¼ ìƒì‡„í•˜ëŠ” ê²ƒ", "íƒ„ì†Œë¥¼ ì €ì¥í•˜ëŠ” ê²ƒ", "íƒ„ì†Œì„¸ë¥¼ ë¶€ê³¼í•˜ëŠ” ê²ƒ"], c: 1, h:"â€˜0â€™ì„ ë§Œë“œëŠ” ê°œë…", e:"íƒ„ì†Œì¤‘ë¦½ì€ ë°°ì¶œëœ íƒ„ì†Œë¥¼ í¡ìˆ˜Â·ì €ê°í•´ ì´ëŸ‰ì„ 0ìœ¼ë¡œ ë§ì¶”ëŠ” ê²ƒì„ ì˜ë¯¸í•©ë‹ˆë‹¤." },
  { q: "ë°”ë‹¤ê±°ë¶ì´ í”Œë¼ìŠ¤í‹± ë´‰íˆ¬ë¥¼ ë¨¹ëŠ” ì´ìœ ëŠ”?", a:["ëƒ„ìƒˆ ë•Œë¬¸", "ìƒ‰ê¹” ë•Œë¬¸", "í•´íŒŒë¦¬ë¡œ ì°©ê°í•´ì„œ", "êµ¶ì£¼ë¦¼ ë•Œë¬¸"], c: 2, h:"í•´íŒŒë¦¬ì™€ ë¹„ìŠ·í•œ ëª¨ì–‘", e:"íˆ¬ëª…í•œ í”Œë¼ìŠ¤í‹±ì´ í•´íŒŒë¦¬ì²˜ëŸ¼ ë³´ì—¬ì„œ ë¨¹ì´ë¡œ ì°©ê°í•©ë‹ˆë‹¤." },
  { q: "ë¯¸ì„¸ë¨¼ì§€ì˜ ì£¼ìš” ì›ì¸ì´ ì•„ë‹Œ ê²ƒì€?", a:["ìë™ì°¨ ë°°ê¸°ê°€ìŠ¤", "ê³µì¥ ì—°ê¸°", "ì‹ë¬¼ì˜ ê´‘í•©ì„±", "ì„íƒ„ ì—°ì†Œ"], c: 2, h:"ì‚°ì†Œë¥¼ ë§Œë“œëŠ” í–‰ë™", e:"ì‹ë¬¼ì˜ ê´‘í•©ì„±ì€ ë¯¸ì„¸ë¨¼ì§€ë¥¼ ë§Œë“¤ì§€ ì•Šê³  ì˜¤íˆë ¤ ê³µê¸°ë¥¼ ì •í™”í•©ë‹ˆë‹¤." },
  { q: "ë¬¼ ì ˆì•½ì„ ìœ„í•´ ê°€ì¥ íš¨ê³¼ì ì¸ ë°©ë²•ì€?", a:["ì§§ì€ ìƒ¤ì›Œ", "ì„¸íƒê¸° ìì£¼ ëŒë¦¬ê¸°", "ë¬¼ì„ ê³„ì† í‹€ì–´ë†“ê¸°", "ìë™ì°¨ ìì£¼ ì„¸ì°¨"], c: 0, h:"ìš•ì‹¤ì—ì„œ!", e:"ì§§ì€ ìƒ¤ì›Œë¡œ í•˜ë£¨ ìˆ˜ì‹­ ë¦¬í„°ì˜ ë¬¼ì„ ì ˆì•½í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤." },
  { q: "ë©¸ì¢… ìœ„ê¸° ë™ë¬¼ ë³´í˜¸ë²•ì˜ ëª©ì ì€?", a:["ë™ë¬¼ì„ ì „ì‹œí•˜ê¸° ìœ„í•¨", "ìƒíƒœê³„ ê· í˜• ìœ ì§€", "ì‚¬ëŒì˜ ì—°êµ¬ ëª©ì ", "ê²½ì œì  ì´ìš©"], c: 1, h:"ìì—°ì˜ ì¡°í™” ìœ ì§€", e:"ë©¸ì¢…ìœ„ê¸°ì¢…ì„ ë³´í˜¸í•¨ìœ¼ë¡œì¨ ìƒíƒœê³„ì˜ ê±´ê°•í•œ ê· í˜•ì„ ìœ ì§€í•©ë‹ˆë‹¤." },
  { q: "ì§€ì† ê°€ëŠ¥í•œ ë°œì „ì´ë€?", a:["ë¯¸ë˜ì„¸ëŒ€ ê³ ë ¤ ì—†ëŠ” ì„±ì¥", "í˜„ì¬ë§Œì„ ìœ„í•œ ê°œë°œ", "ë¯¸ë˜ì„¸ëŒ€ê¹Œì§€ ê³ ë ¤í•œ ë°œì „", "í™˜ê²½ë³´ë‹¤ ê²½ì œ ìš°ì„ "], c: 2, h:"ë¯¸ë˜ ì„¸ëŒ€ í¬í•¨", e:"ì§€ì† ê°€ëŠ¥í•œ ë°œì „ì€ ë¯¸ë˜ ì„¸ëŒ€ê°€ í•„ìš”ë¥¼ ì¶©ì¡±í•  ìˆ˜ ìˆë„ë¡ í•˜ëŠ” ë°œì „ì…ë‹ˆë‹¤." },
  { q: "ê¸°í›„ë³€í™”ì˜ ì§ì ‘ì  ì˜í–¥ì´ ì•„ë‹Œ ê²ƒì€?", a:["í•´ìˆ˜ë©´ ìƒìŠ¹", "í­ì—¼ ì¦ê°€", "ê³µë£¡ ë¶€í™œ", "ê¸°ìƒì´ë³€"], c: 2, h:"ë¹„í˜„ì‹¤ì ì¸ ì„ íƒì§€", e:"ê³µë£¡ ë¶€í™œì€ ê¸°í›„ë³€í™”ì˜ ê²°ê³¼ê°€ ì•„ë‹™ë‹ˆë‹¤ ğŸ˜…" }
];

const themes = ["forest","ocean","desert","snow"];
let current = 0, score = 0, timer = 20, interval, used=[];
let highscore = localStorage.getItem("ecoHigh") || 0;
const qEl = document.getElementById("question");
const oEl = document.getElementById("options");
const tEl = document.getElementById("timer");
const hEl = document.getElementById("hint");
const nEl = document.getElementById("next");
const rEl = document.getElementById("result");
const eEl = document.getElementById("explanation");
const pEl = document.getElementById("progress-bar");
const hsEl = document.getElementById("highscore");
const canvas = document.getElementById("bgCanvas");
const ctx = canvas.getContext("2d");

function resizeCanvas(){ canvas.width = window.innerWidth; canvas.height = window.innerHeight; }
window.addEventListener("resize", resizeCanvas); resizeCanvas();

function drawBackground(type){
  ctx.clearRect(0,0,canvas.width,canvas.height);
  if(type=="forest") forestAnim();
  if(type=="ocean") oceanAnim();
  if(type=="desert") desertAnim();
  if(type=="snow") snowAnim();
}

function forestAnim(){
  let leaves = Array(30).fill().map(()=>({x:Math.random()*canvas.width,y:Math.random()*canvas.height,r:Math.random()*3+2}));
  function loop(){
    ctx.fillStyle="#013220";ctx.fillRect(0,0,canvas.width,canvas.height);
    ctx.fillStyle="rgba(0,255,100,0.5)";
    leaves.forEach(l=>{ctx.beginPath();ctx.arc(l.x,l.y,l.r,0,Math.PI*2);ctx.fill();l.y+=0.5;if(l.y>canvas.height) l.y=0;});
    requestAnimationFrame(loop);
  } loop();
}
function oceanAnim(){
  let waves = Array(50).fill().map(()=>({x:Math.random()*canvas.width,y:Math.random()*canvas.height}));
  function loop(){
    ctx.fillStyle="#001f3f";ctx.fillRect(0,0,canvas.width,canvas.height);
    ctx.fillStyle="rgba(0,150,255,0.3)";
    waves.forEach(w=>{ctx.beginPath();ctx.arc(w.x,w.y,Math.random()*5+2,0,Math.PI*2);ctx.fill();w.y+=0.7;if(w.y>canvas.height) w.y=0;});
    requestAnimationFrame(loop);
  } loop();
}
function desertAnim(){
  let dusts = Array(60).fill().map(()=>({x:Math.random()*canvas.width,y:Math.random()*canvas.height}));
  function loop(){
    ctx.fillStyle="#c2b280";ctx.fillRect(0,0,canvas.width,canvas.height);
    ctx.fillStyle="rgba(255,255,200,0.6)";
    dusts.forEach(d=>{ctx.beginPath();ctx.arc(d.x,d.y,2,0,Math.PI*2);ctx.fill();d.x+=Math.sin(d.y/50)*0.5;d.y+=0.3;if(d.y>canvas.height) d.y=0;});
    requestAnimationFrame(loop);
  } loop();
}
function snowAnim(){
  let snow = Array(50).fill().map(()=>({x:Math.random()*canvas.width,y:Math.random()*canvas.height,r:Math.random()*3+1}));
  function loop(){
    ctx.fillStyle="#87CEFA";ctx.fillRect(0,0,canvas.width,canvas.height);
    ctx.fillStyle="white";
    snow.forEach(s=>{ctx.beginPath();ctx.arc(s.x,s.y,s.r,0,Math.PI*2);ctx.fill();s.y+=0.6;if(s.y>canvas.height) s.y=0;});
    requestAnimationFrame(loop);
  } loop();
}

function startTimer(){
  clearInterval(interval);
  timer = 20;
  interval = setInterval(()=>{
    timer--;
    tEl.innerText = "ë‚¨ì€ ì‹œê°„: " + timer + "ì´ˆ";
    if(timer<6) document.body.style.background = "rgba(200,0,0,0.2)";
    else document.body.style.background = "transparent";
    if(timer<=0){ clearInterval(interval); showExplanation(false); }
  },1000);
}

function loadQuestion(){
  rEl.innerText=""; eEl.innerText="";
  if(current>=10){ endGame(); return; }
  let idx;
  do{ idx=Math.floor(Math.random()*quizData.length); }while(used.includes(idx));
  used.push(idx);
  const q = quizData[idx];
  const theme = themes[Math.floor(Math.random()*themes.length)];
  drawBackground(theme);
  qEl.innerText = (current+1)+". "+q.q;
  oEl.innerHTML = "";
  q.a.forEach((opt,i)=>{
    const btn=document.createElement("button");
    btn.textContent=opt;
    btn.onclick=()=>checkAnswer(i===q.c,q);
    oEl.appendChild(btn);
  });
  pEl.style.width = ((current)/10*100)+"%";
  hEl.onclick=()=>alert("íŒíŠ¸: "+q.h);
  startTimer();
}

function checkAnswer(correct,q){
  clearInterval(interval);
  if(correct){ score+=10; rEl.innerText="âœ… ì •ë‹µ!"; }
  else { rEl.innerText="âŒ ì˜¤ë‹µ!"; }
  showExplanation(correct,q);
}

function showExplanation(correct,q){
  eEl.innerText = q?("ğŸ“˜ "+q.e):"ì‹œê°„ì´ˆê³¼!";
  nEl.style.display="inline";
  nEl.onclick=()=>{current++;nEl.style.display="none";loadQuestion();}
}

function endGame(){
  clearInterval(interval);
  pEl.style.width="100%";
  document.body.style.background="rgba(0,0,0,0.7)";
  let msg = score>=80?"ğŸŒ¿ í›Œë¥­í•´ìš”! í™˜ê²½ ì§€í‚´ì´!":
            score>=50?"ğŸŒ± ê´œì°®ì•„ìš”, ì¡°ê¸ˆ ë” ê³µë¶€í•´ë³¼ê¹Œìš”?":
            "ğŸ‚ ë‹¤ì‹œ ë„ì „í•´ë³´ì„¸ìš”!";
  if(score>highscore){ localStorage.setItem("ecoHigh",score); highscore=score; }
  qEl.innerText = "í€´ì¦ˆ ì¢…ë£Œ! ì´ì : "+score+"ì ";
  oEl.innerHTML = ""; hEl.style.display="none";
  rEl.innerText = msg; eEl.innerText="";
  hsEl.innerText="ìµœê³ ì ìˆ˜: "+highscore+"ì ";
}

loadQuestion();
</script>
</body>
</html>
